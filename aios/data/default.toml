# AIOS Configuration
# Copy to /etc/aios/config.toml for system-wide settings
# or ~/.config/aios/config.toml for user settings

[api]
# LLM provider: anthropic, openai, or lm_studio
provider = "anthropic"

# === Anthropic Settings ===
# Your Anthropic API key (required for anthropic provider)
# api_key = "sk-ant-..."

# === OpenAI Settings ===
# Your OpenAI API key (required for openai provider)
# openai_api_key = "sk-..."

# OpenAI base URL - set for LM Studio or other OpenAI-compatible APIs
# For LM Studio: "http://localhost:1234/v1"
# openai_base_url = "http://localhost:1234/v1"

# === Model Settings ===
# Model to use (provider-specific)
# Anthropic: claude-sonnet-4-5-20250929, claude-opus-4-20250514, claude-haiku-4-5
# OpenAI: gpt-5.2, gpt-5.2-pro, gpt-5.2-codex, gpt-5-mini, gpt-5-nano
# LM Studio: Qwen/Qwen2.5-Coder-7B-Instruct-GGUF (or any loaded model)
model = "claude-sonnet-4-5-20250929"

# Maximum tokens per response
max_tokens = 4096

# Stream responses word-by-word (disable for debugging or slow terminals)
streaming = true

# Max tokens for conversation history before summarization (default 150000)
# Reduce for lower memory usage, increase for longer conversations
context_budget = 150000

# Trigger summarization at this percentage of context budget (0.5 = 50%, 0.95 = 95%)
# Lower values summarize more aggressively, higher values wait longer
summarize_threshold = 0.75

# Always keep at least this many recent messages verbatim (not summarized)
# Higher values preserve more recent context, lower values save more tokens
min_recent_messages = 6

# === OpenAI-Specific Settings ===
# Allow OpenAI to call multiple tools in parallel (OpenAI provider only)
# Set to false to force sequential tool execution
parallel_tool_calls = true

[safety]
# Require confirmation for potentially dangerous commands
require_confirmation = true

# Commands that are always blocked (regex patterns)
blocked_patterns = [
    "rm -rf /",
    "mkfs\\.",
    "dd if=.* of=/dev/",
    ":(){:|:&};:",
    "> /dev/sda",
]

# Commands that require explicit confirmation
dangerous_patterns = [
    "rm -rf",
    "chmod 777",
    "chown",
    "shutdown",
    "reboot",
    "systemctl stop",
    "apt remove",
    "apt purge",
]

[ui]
# Show technical details (for advanced users)
show_technical_details = false

# Use colors in output
use_colors = true

# Show what commands are being run
show_commands = true

[logging]
# Enable audit logging
enabled = true

# Log file location (~ expands to home directory)
path = "~/.config/aios/logs/audit.log"

# Log level: debug, info, warning, error
level = "info"

[session]
# Save conversation history
save_history = true

# History file location
history_path = "~/.config/aios/history"

# Maximum history entries
max_history = 1000

[executor]
# Default command timeout in seconds
default_timeout = 30

# Maximum allowed timeout in seconds (1 hour)
max_timeout = 3600

[code]
# Enable Claude Code integration for coding tasks
enabled = true

# Auto-detect coding requests and route to Claude Code
auto_detect = true

# Detection sensitivity: high, moderate, low
auto_detect_sensitivity = "moderate"

# Auth mode: "api_key" or "subscription" (comment out to prompt on first use)
# auth_mode = "api_key"

[widgets]
# Widgets shown on welcome screen (below shortcuts)
# Available widgets:
#   cpu_memory     - CPU and memory usage bars
#   disk           - Disk usage bar
#   uptime         - System uptime and load average
#   docker         - Docker containers status
#   network        - Network interfaces and IPs
#   process_status - Status of nginx, docker, postgresql, redis
#   top_procs      - Top processes by CPU usage
#   users          - Logged in users
#   tasks          - Background tasks summary
#   datetime       - Current date and time
#   swap           - Swap memory usage
enabled = ["cpu_memory", "uptime", "disk"]
